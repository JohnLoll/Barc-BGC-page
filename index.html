<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Roblox Alt Detector</title>

<style>
  body {
    background: #0b0f14;
    color: #e6e6e6;
    font-family: Arial, sans-serif;
  }

  .container {
    max-width: 600px;
    margin: 50px auto;
    padding: 20px;
    background: #121821;
    border-radius: 8px;
  }

  h1 {
    text-align: center;
  }

  input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    background: #1b2330;
    border: none;
    color: white;
    font-size: 16px;
  }

  button {
    width: 100%;
    padding: 10px;
    background: #3b82f6;
    border: none;
    color: white;
    font-size: 16px;
    cursor: pointer;
  }

  .card {
    margin-top: 20px;
    padding: 15px;
    background: #1b2330;
    border-radius: 6px;
  }

  .high { color: #ef4444; }
  .medium { color: #f59e0b; }
  .low { color: #10b981; }
</style>
</head>

<body>

<div class="container">
  <h1>Roblox Alt Detector</h1>

  <input id="username" placeholder="Enter Roblox username">
  <button onclick="runAltCheck()">Run Check</button>

  <div id="output"></div>
</div>

<script>
const PROXY = "https://corsproxy.io/?";

// ---------- API HELPERS ----------

async function getUserId(username) {
  const res = await fetch("https://users.roblox.com/v1/usernames/users", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      usernames: [username],
      excludeBannedUsers: false
    })
  });

  const data = await res.json();
  return data.data[0]?.id;
}

async function getUserInfo(userId) {
  const res = await fetch(`https://users.roblox.com/v1/users/${userId}`);
  return await res.json();
}

async function getFriendsCount(userId) {
  const res = await fetch(
    `https://friends.roblox.com/v1/users/${userId}/friends/count`
  );
  return (await res.json()).count;
}

async function getInventoryCount(userId, assetType) {
  const url =
    PROXY +
    `https://www.roblox.com/users/inventory/list-json?userId=${userId}&assetTypeId=${assetType}&pageNumber=1`;

  const res = await fetch(url);
  const data = await res.json();
  return data?.Data?.length || 0;
}

// ---------- ALT SCORING ----------

function calculateAltScore(data) {
  let score = 0;

  if (data.accountAge < 30) score += 40;
  else if (data.accountAge < 90) score += 20;

  if (data.clothing < 5) score += 20;
  if (data.badges < 3) score += 15;
  if (data.friends < 10) score += 10;

  if (score >= 60) return { label: "High Alt", class: "high" };
  if (score >= 30) return { label: "Medium Alt", class: "medium" };
  return { label: "Low / Not Alt", class: "low" };
}

// ---------- MAIN ----------

async function runAltCheck() {
  const output = document.getElementById("output");
  output.innerHTML = "Checking...";

  try {
    const username = document.getElementById("username").value.trim();
    if (!username) throw "Enter a username";

    const userId = await getUserId(username);
    if (!userId) throw "User not found";

    const info = await getUserInfo(userId);
    const friends = await getFriendsCount(userId);

    // Asset Types
    const shirts = await getInventoryCount(userId, 11);
    const pants = await getInventoryCount(userId, 12);
    const badges = await getInventoryCount(userId, 21);

    const accountAge = Math.floor(
      (Date.now() - new Date(info.created)) / 86400000
    );

    const result = calculateAltScore({
      accountAge,
      clothing: shirts + pants,
      badges,
      friends
    });

    output.innerHTML = `
      <div class="card">
        <h3>${info.name}</h3>
        <p>Account Age: ${accountAge} days</p>
        <p>Clothing: ${shirts + pants}</p>
        <p>Badges: ${badges}</p>
        <p>Friends: ${friends}</p>
        <h2 class="${result.class}">${result.label}</h2>
        <p><a href="https://www.roblox.com/users/${userId}/profile" target="_blank">View Profile</a></p>
      </div>
    `;
  } catch (err) {
    output.innerHTML = `<p style="color:#ef4444">${err}</p>`;
  }
}
</script>

</body>
</html>
