<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Roblox Alt Detector</title>
  <meta name="description" content="Professional Roblox alt account detection with real badge filtering, GAR badge position, and inventory analysis." />
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:#0a0e27;color:#e8eaf6;line-height:1.6}
    .app{display:flex;min-height:100vh}
    .sidebar{width:260px;background:linear-gradient(180deg,#0f172a 0%,#1e293b 100%);padding:24px;display:flex;flex-direction:column;box-shadow:4px 0 24px rgba(0,0,0,0.4)}
    .brand{font-size:20px;font-weight:800;margin-bottom:32px;color:#60a5fa;text-align:center}
    .nav{display:flex;flex-direction:column;gap:8px}
    .nav button{background:transparent;border:0;color:#cbd5e1;padding:14px 16px;border-radius:10px;text-align:left;cursor:pointer;font-weight:500;transition:all .2s;font-size:15px}
    .nav button:hover{background:#1e293b;color:#f1f5f9}
    .nav button.active{background:#3b82f6;color:white;font-weight:600;box-shadow:0 4px 12px rgba(59,130,246,.4)}
    .main{flex:1;padding:32px;overflow-y:auto}
    .toprow{display:flex;flex-direction:column;gap:16px;margin-bottom:32px}
    @media(min-width:768px){.toprow{flex-direction:row;justify-content:space-between;align-items:center}}
    .search-box{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
    .input{padding:12px 16px;border-radius:12px;border:2px solid #334155;background:#1e293b;color:#f1f5f9;font-size:15px;transition:all .2s;flex:1;min-width:200px}
    .input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.2)}
    .btn{padding:12px 28px;border-radius:12px;border:0;background:linear-gradient(135deg,#3b82f6,#2563eb);color:white;cursor:pointer;font-weight:600;font-size:15px;transition:all .2s;box-shadow:0 4px 12px rgba(59,130,246,.3)}
    .btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(59,130,246,.4)}
    .btn:disabled{background:#334155;cursor:not-allowed;opacity:0.6}
    .status{color:#94a3b8;font-size:14px;padding:8px 16px;background:#1e293b;border-radius:8px}
    .grid{display:grid;grid-template-columns:1fr;gap:24px}
    @media(min-width:1024px){.grid{grid-template-columns:380px 1fr}}
    .card{background:#1e293b;padding:24px;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,.3);border:1px solid #334155}
    .avatar-section{display:flex;flex-direction:column;align-items:center;gap:20px}
    .avatar{width:240px;height:240px;border-radius:16px;object-fit:cover;background:#0f172a;border:4px solid #334155;box-shadow:0 12px 32px rgba(0,0,0,.5)}
    .user-info{text-align:center;width:100%}
    .display-name{font-size:26px;font-weight:700;margin-bottom:6px}
    .username{color:#94a3b8;font-size:16px;margin-bottom:16px}
    .bio{color:#cbd5e1;font-size:15px;line-height:1.6;padding:16px;background:#0f172a;border-radius:12px;margin-top:12px;max-height:140px;overflow-y:auto}
    .stats-row{display:grid;grid-template-columns:1fr 1fr;gap:16px;width:100%;margin-top:20px}
    .stat-box{text-align:center;padding:16px;background:#0f172a;border-radius:12px}
    .stat-label{color:#94a3b8;font-size:14px;margin-bottom:6px}
    .stat-value{font-size:22px;font-weight:700;color:#60a5fa}
    .tabs{display:flex;gap:12px;margin-top:20px;width:100%}
    .tab{flex:1;padding:12px;border-radius:12px;background:#0f172a;cursor:pointer;font-weight:600;text-align:center;transition:all .2s;border:2px solid transparent}
    .tab:hover{border-color:#3b82f6}
    .tab.active{background:#3b82f6;color:white;box-shadow:0 4px 12px rgba(59,130,246,.4)}
    .section-title{font-size:22px;font-weight:700;margin-bottom:20px;color:#f1f5f9}
    .info-grid{display:grid;gap:12px}
    .info-item{display:flex;justify-content:space-between;padding:14px;background:#0f172a;border-radius:12px;border-left:4px solid #3b82f6}
    .info-label{color:#94a3b8;font-weight:500;font-size:15px}
    .info-value{color:#f1f5f9;font-weight:600;font-size:15px}
    .badge{display:inline-block;padding:8px 14px;border-radius:8px;font-size:14px;font-weight:700;margin-right:8px;margin-bottom:8px}
    .badge-auto-fail{background:#7c3aed;color:white}
    .badge-high{background:#ef4444;color:white}
    .badge-medium-high{background:#f97316;color:white}
    .badge-medium{background:#eab308;color:#0a0e27}
    .badge-low{background:#22c55e;color:white}
    .skeleton{background:linear-gradient(90deg,#1e293b 25%,#334155 50%,#1e293b 75%);background-size:200% 100%;animation:shimmer 1.8s infinite;border-radius:12px}
    @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
    .alert{padding:20px;border-radius:14px;margin-bottom:20px;border:2px solid;font-size:15px;font-weight:500}
    .alert-warning{background:#422006;border-color:#f59e0b;color:#fbbf24}
    .alert-error{background:#450a0a;border-color:#dc2626;color:#f87171}
    .alert-success{background:#052e16;border-color:#16a34a;color:#4ade80}
    .api-note{color:#94a3b8;font-size:14px;margin-top:8px}
    @media(max-width:768px){
      .sidebar{display:none}
      .search-box{flex-direction:column;align-items:stretch}
      .stats-row{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">Advanced Alt Detector</div>
      <div class="nav">
        <button class="active" data-tab="overview">Overview</button>
        <button data-tab="badges">Badges</button>
        <button data-tab="inventory">Inventory</button>
        <button data-tab="social">Social</button>
      </div>
      <div style="margin-top:auto;font-size:13px;color:#64748b;text-align:center;padding-top:20px;">
        v3.0 • Requires Roblox Cloud API Key
      </div>
    </aside>

    <main class="main">
      <div class="toprow">
        <div class="search-box">
          <div style="flex:1">
            <input id="apiKeyInput" class="input" placeholder="Roblox Cloud API Key (rbx_cloud_...)" />
            <div class="api-note">Required for inventory & advanced analysis. Saved only in your browser.</div>
          </div>
          <input id="usernameInput" class="input" placeholder="Enter Roblox username..." />
          <button id="searchBtn" class="btn" disabled>Analyze</button>
        </div>
        <div class="status" id="statusText">Enter your Roblox Cloud API key to begin</div>
      </div>

      <div class="grid">
        <div class="card">
          <div class="avatar-section">
            <div id="avatarSkeleton" class="skeleton" style="width:240px;height:240px;display:none"></div>
            <img id="avatarImg" class="avatar" style="display:none" alt="User avatar" />
            <div class="user-info">
              <div id="displayName" class="display-name">—</div>
              <div id="usernameSmall" class="username">@—</div>
              <div id="bio" class="bio" style="display:none">No bio</div>
            </div>
            <div class="stats-row">
              <div class="stat-box"><div class="stat-label">Account Age</div><div class="stat-value" id="accountAge">—</div></div>
              <div class="stat-box"><div class="stat-label">Friends</div><div class="stat-value" id="friendsCount">—</div></div>
              <div class="stat-box"><div class="stat-label">Followers</div><div class="stat-value" id="followersCount">—</div></div>
              <div class="stat-box"><div class="stat-label">Following</div><div class="stat-value" id="followingCount">—</div></div>
            </div>
            <div class="tabs">
              <div id="renderFull" class="tab active">Full Body</div>
              <div id="renderHead" class="tab">Headshot</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="section-title" id="panelTitle">Alt Detection Analysis</div>
          <div id="panelBody">
            <div class="alert alert-warning">
              <strong>API Key Required</strong><br>
              This tool uses the official Roblox Cloud API to access inventory and perform advanced detection.<br><br>
              You must enter a valid <code>rbx_cloud_...</code> API key to analyze accounts.
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

<script>
const CONSTANTS = {
  GAR_BADGE_ID: 2124527902,
  BADGES_PER_PAGE: 30,
  ROBLOX_CREATOR_ID: 1
};

const BADGE_BLACKLIST = {
  GROUPS: [12812691,33902982,5088172,15750958230,11858305,32488102,13617167,4705120,5218018],
  KEYWORDS: ['obby','easy','free','quick','simple','fast','auto','afk','idle','click','simulator','tycoon','farm','grind','noob','pro','legend','master','expert','stage','camp','level','collect','find','touch','press','walk','run','jump','badge','drop','welcome','visitor']
};

let currentUserId = null;
let currentUserData = null;
let activeTab = 'overview';
let avatarLarge = null, avatarHead = null;

const el = {
  apiKeyInput: document.getElementById('apiKeyInput'),
  usernameInput: document.getElementById('usernameInput'),
  searchBtn: document.getElementById('searchBtn'),
  statusText: document.getElementById('statusText'),
  avatarImg: document.getElementById('avatarImg'),
  avatarSkeleton: document.getElementById('avatarSkeleton'),
  displayName: document.getElementById('displayName'),
  usernameSmall: document.getElementById('usernameSmall'),
  bio: document.getElementById('bio'),
  accountAge: document.getElementById('accountAge'),
  friendsCount: document.getElementById('friendsCount'),
  followersCount: document.getElementById('followersCount
